---
layout: post
title: RDBMS Physical Design
description: "오라클 데이터베이스 설계 & 활용 2-5장 스터디"
categories: BookReader
---

## 물리적 설계
실제 물리적으로 데이터베이스를 모델링 하는 단계.   
FK로 내려 받은 컬럼들이 인덱스로 설계되는 과정, 뷰와 저장공간 계획,
부모-자식 간의 무결성처리 등을 함으로써 뼈대인 논리 모델링에 살을 붙이는 작업 진행

***

### 제약조건(Constraint) 정의 및 설계
참조 무결성 처리   
논리적 모델링을 마치고 PK와 FK의 관계를 데이터베이스에 정의.   
___제약조건은 반드시 해야 하는 것이 아니다.___   
비즈니스 룰 또는 프로그램 로직 성격에 따라 결정하는 것.    

#### Constraint를 지정한다는 것 ?
PK와 FK가 입력, 수정, 삭제에 대해서 데이터에 일관성을 주겠다는 의미.

* 제한 (Restrict)
    - PK를 수정할 때, 해당 PK를 FK로 가지고 있는 테이블이 여러개 존재한다면 PK가 수정되지 않도록 함
* 연쇄 (Cascade)
    - PK를 수정할 때, 해당 PK를 FK로 가지고 있는 테이블이 여러개 존재한다면 PK를 연쇄적으로 수정.

***

### 데이터 타입

#### Varchar2
VARCHAR2와 CHAR 모두 문자형 타입이지만, 가장 큰 차이는 가변길이이다.

 | VARCHAR2 | CHAR
------------ | ------------- | ------------
가변길이 | 입력된 길이만큼 저장 | 남는 공간엔 공백이 들어감.
최대길이 | 4000 Byte  | 2000 Byte
특징 | PCTFREE 값이 적절하지 않을 경우 문제가 발생할 수 있음. | 길이의 편차가 있는 경우 저장공간 낭비와 수행속도 저하 현상 발생 가능


#### Number
___숫자가 들어간다고 해서 반드시 Number 타입으로 지정 할 필요 없음___   

* 가변 길이 저장 형식을 따르고 있음
* LIKE 검색을 사용하는 경우 NUMBER 타입으로 저장하지 말 것.
  - 해당 컬럼의 모든 변수를 문자형으로 변형하여 자료를 검색한다.
* 숫자와 관련된 모든 표현이 가능하지만 38자리 까지만 표현 가능
* Primary Key 값을 입력받는 키 값이 숫자일 경우를 제외하고 INDEX를 생성 해야 하는 경우엔
VARCHAR2 타입을 사용하는 것이 좋다.
  - 단, 연산을 하거나 소수점을 입력 하는 경우 소수점 이하 부분이 반올림 되므로 잘 고려해야 함.

#### Number 타입의 표현

------------ | ------------- | ------------
1234567.89 | NUMBER | 1234567.89
1234567.89 | NUMBER(9) | 1234568
1234567.89 | NUMBER(9,2) | 1234567.89
1234567.89 | NUMBER(9,1) | 1234567.9
1234567.89 | NUMBER(6) | exceeds precision
1234567.89 | NUMBER(7,-2) | 1234500
1234567.89 | NUMBER(7,2) | exceeds precision
0.1234 | NUMBER(4,5) | .01234
0.00012 | NUMBER(4,5) | .00012
0.000126 | NUMBER(4,5) | .00013
0.0000012 | NUMBER(2,7) | .0000012
0.00000123 | NUMBER(2,7) | .0000012

#### Date
타입 지정 방법은 숫자 형식과 비슷 하다.   
날짜 연산이 자유로워 많이 사용하고 있지만,
일반적으로 시간을 제외한 날짜 연산이 자주 발생하는 경우를 제외하고는
VARCHAR2를 사용하고, TO_DATE() 함수를 사용하는 것이 좋다.

#### Date타입의 표현

DATE | FROM | TO
------------ | ------------- | ------------
YEAR | -4712 | 9999
MONTH | 01(0) | 12(11)
DAY | 01 | 31
HOUR | 00(0) | 23
MINUTE | 00(0) | 59
SECOND | 00 | 59.9
TIMEZONE_HOUR | -12 | 13
TIMEZONE_MINUTE | 00 | 59
