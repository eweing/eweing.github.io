<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      RDBMS Data Modeling (2) &middot; CodingDragon
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/styles.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="CodingDragon" href="/atom.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="/" title="Home">CodingDragon</a>
          <small>Meaning of Life</small>
        </h3>
      </header>

      <main>
        <article class="post">
  <h1 class="post-title">RDBMS Data Modeling (2)</h1>
  <time datetime="2015-11-01T00:00:00+09:00" class="post-date">01 Nov 2015</time>
  <h2 id="section">상세 개념 데이터 모델링</h2>
<p>기본적으로는 Entity, 속성, 관계를 바탕으로 표현하는 것이지만,
기본 개념 데이터 모델보다 어려울 수 있음.</p>

<hr />

<h3 id="primary-key">기본키 (Primary Key)</h3>
<p>UID가 상세 개념으로 넘어오면서 PK로 변한다.</p>

<h4 id="pk-">PK의 특징</h4>
<ol>
  <li>테이블에 한개 또는 그 이상 존재한다.</li>
  <li>테이블의 모든 데이터를 Unique하게 만들어준다. <br />
즉 PK를 통해 각 ROW를 구분할 수 있다.</li>
  <li>모든 테이블에는 반드시 PK가 존재한다.</li>
  <li>NOT NULL</li>
</ol>

<h4 id="pk">상속받는 PK</h4>
<p>PK는 자식 Entity에 상속 가능.  <br />
이 경우 자식 Entity에는 속성명을 적지 않는다.</p>

<hr />

<h3 id="foreign-key">외부키 (Foreign Key)</h3>
<p>관계에서 상속받는 UID가 현재 테이블의 FK가 되는 경우 사용. <br />
PK로 상속 받는 것과 차이가 있다. 단순히 두 테이블 간의 관계를 성립하기 위해 사용하는 것. <br />
상속받은 자신은 따로 PK가 존재한다.</p>

<hr />

<h3 id="normalizing-normalization">정규화 (Normalizing, Normalization)</h3>
<ul>
  <li><strong>제 1정규형</strong> <br />
<em>모든 Attribute는 원자값을 갖는다. 반복 형태가 있어서는 안된다.</em></li>
  <li><strong>제 2정규형</strong> <br />
<em>모든 Attribute는 반드시 UID에 종속되어야 한다.</em> <br />
만약 UID 일부에 종속된다면, 해당 Attribute는 다른 테이블로 옮겨져야 한다. <br />
제 2정규형을 따름으로써 부모 자식 관계로 종속되어 있는 테이블의 속성값은
입력, 수정시 불필요한 데이터 입력량을 줄일 수 있다.</li>
  <li><strong>제 3정규형</strong> <br />
<em>UID가 아닌 Attribute사이에는 서로 종속될 수 없다.</em> <br />
다음과 같은 경우에 하는 것이 좋다. <br />
» 또 다른 자식 Entity가 생겨날 때 <br />
» 서브타입의 하위속성이 계속 추가될 때 <br />
» 다른 Entity에서도 관계를 갖게될 때</li>
</ul>

<h4 id="section-1">제 1 정규형</h4>
<p>환자와 진료기록</p>

<h4 id="section-2">제 2 정규형</h4>
<p>주문 내역 Entity에서 물품 정보와 배송 정보를 다른 Entity로 빼내기</p>

<h4 id="section-3">제 3 정규형</h4>

<hr />

<h3 id="mm-1m">M:M? 1:M!</h3>
<p>대다수의 데이터는 M:M 관계이지만, DB에 저장하고 효율적으로 관리하기 위해서는 1:M 관계로 풀어내야 한다. <br />
환자와 의사의 경우, 직접적으로 연결하면 M:M 관계지만, <br />
그 사이에 진료목록 Entity를 넣으면 의사-진료목록, 진료목록-환자 간에 1:M 관계를 만들 수 있다.</p>

<hr />

<h3 id="section-4">순환관계</h3>
<p>자기자신을 참조하는 경우. <br />
순환관계의 가장 대표적인 예는 바로 게시판이다. <br />
게시판에서는 자신의 글 밑에 다른 사람들의 댓글이 달리는 구조. <br />
그 외에도 ‘회사 &gt; 공장 &gt; 부서 &gt; 팀’ 처럼 조직 Entity를 순환 관계 설정하는 경우도 있다. <br />
1:M 혹은 1:1 관계로 표현</p>

<hr />

<h3 id="bom">BOM</h3>
<p>Bill of Material (자재명세서) <br />
제품 하나가 어떤 부품들로 이루어져 있는가에 대한 데이터. <br />
M:M 순환관계를 풀어낼 때 주로 사용.</p>

<h4 id="entity--bom">부품 Entity로 알아보는 BOM</h4>
<p>제품은 여러 부품으로 구성되고 또 하나의 부품도 여러 부품으로 구성된다. <br />
이 경우 부품과 부품은 M:M 관계를 맺음. <br />
이러한 M:M 순환관계의 모델을 교차 Entity 생성으로 해결할 수 있다.</p>

<hr />

<h3 id="section-5">시계열관리 (이력관리)</h3>
<p>이력관리를 위해서는 일반적으로 이력 관리용 Entity를 생성하는 것이 원칙. <br />
하지만 자신의 Entity 자체가 이력이 되는 경우도 있음.</p>

<h4 id="section-6">이력관리 모델 선정시 고려 해야 하는 것</h4>
<ol>
  <li>과거 데이터의 쓰임새</li>
  <li>검색 유무</li>
  <li>입력 후 수정이나 삭제와 같은 이벤트 관리가 필요한지</li>
  <li>시간이 지난 후 모델간 관계가 변할 수 있는지</li>
</ol>

<h4 id="entity-">Entity 형태</h4>
<ol>
  <li>교차 Entity</li>
  <li>Attribute를 분리하여 Entity로 변환</li>
</ol>

<hr />

<h3 id="section-7">배터적 관계와 데이터 통합</h3>
<p>Entity를 선정하고 모델링 하는 과정에서
특정 Entity가 다른 두 개 이상의 Entity 모두와 관계를 가지는 경우 있음.
이러한 경우를 배타적 관계라고 한다. <br />
<strong><em>서로 다른 두 개의 Entity를 가지고 합집합을 이루지만 둘 중 하나를 선택해야 하는 경우</em></strong></p>

<h4 id="section-8">배타적 관계가 발생하는 이유?</h4>
<p>모델링을 하면서 Entity 자체를 명확하게 구분짓지 못하기 때문.</p>

<h4 id="section-9">배타적 관계가 발생했을 경우?</h4>
<p><strong>? Entity 통합을 할 것인가?</strong> <br />
» Entity의 융통성이 좋아지지만, Entity의 의미 자체가 모호해 질 수 있다. <br />
<strong>? 현재 의미 그대로 둘 것인가?</strong> <br />
» 의미는 분명해지지만, 유사한 Entity가 추가되고
새로운 프로세스가 추가될 때 또 다른 배타적 관계가 생성될 수 있다.</p>

<h4 id="section-10">배타적 관계 표현</h4>
<p>일반적으로 Arc(호)로 표현. <br />
아크는 하나의 Entity에 속해야 함.
하나의 Entity에 다수의 아크가 사용될 수 있어도, 다른 Entity의 아크와 겹쳐질 수는 없다.</p>

<table>
  <thead>
    <tr>
      <th>\</th>
      <th>장점</th>
      <th>단점</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>통합</td>
      <td>데이터 액세스가 간편</td>
      <td>테이블 컬럼 수 증가</td>
    </tr>
    <tr>
      <td> </td>
      <td>수행 속도가 좋아질 수 있음.</td>
      <td>테이블 블록 수가 증가</td>
    </tr>
    <tr>
      <td> </td>
      <td>복잡한 처리를 하나의 SQL로 통합 가능.</td>
      <td>인덱스 크기가 증가</td>
    </tr>
    <tr>
      <td>분할</td>
      <td>처리시마다 SubType 유형 구분이 불필요</td>
      <td>트랜잭션 처리시 여러 테이블을 처리</td>
    </tr>
    <tr>
      <td> </td>
      <td>전체 테이블 스캔시 유리</td>
      <td>UID 유지 관리가 어려움</td>
    </tr>
    <tr>
      <td> </td>
      <td>단위 테이블의 크기가 감소</td>
      <td>복잡한 처리의 SQL 통합이 어려움</td>
    </tr>
  </tbody>
</table>

<hr />

<h3 id="denormalizing-denormalization">반정규화 (Denormalizing, Denormalization)</h3>
<p>정규화 과정을 거치는 것이 모델링의 기본 조건이지만,
정규화를 모두 충족시켰을 때 수행 속도가 떨어질 수 있다. <br />
이 때 선택적으로 테이블을 재분할 할 것인지 중복 테이블과 컬럼을 생성시킬 것인지를 고려하고
테이블을 제거하는 경우 또한 고려해야 한다. <br />
즉, 선택적으로 반정규화를 통해 이러한 문제들을 해결 한다는 것.</p>

<h4 id="section-11">반정규화 예시</h4>
<ol>
  <li>테이블 통합
    <ul>
      <li>SubType을 SuperType으로 통합</li>
      <li>1:1 관계를 하나의 Entity로 통합</li>
      <li>1:M 관계의 통합</li>
    </ul>
  </li>
  <li>테이블 분할
    <ul>
      <li>수직, 수평 분할</li>
    </ul>
  </li>
  <li>테이블 추가
    <ul>
      <li>중복 테이블</li>
      <li>이력 테이블</li>
      <li>통계(연산) 테이블</li>
    </ul>
  </li>
</ol>


</article>


<aside class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/bookreader/2015/11/01/RDBMS-Physical-Design/">
            RDBMS Physical Design
            <small><time datetime="2015-11-01T00:00:00+09:00">01 Nov 2015</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/bookreader/2015/11/01/RDBMS-Data-Modeling-1/">
            RDBMS Data Modeling (1)
            <small><time datetime="2015-11-01T00:00:00+09:00">01 Nov 2015</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/bookreader/2015/11/01/RDBMS-Concept/">
            RDBMS Concept
            <small><time datetime="2015-11-01T00:00:00+09:00">01 Nov 2015</time></small>
          </a>
        </h3>
      </li>
    
  </ul>
</aside>


      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="2015-11-02T00:45:45+09:00">2015</time>. All rights reserved.
        </small>
      </footer>
    </div>

  </body>
</html>
