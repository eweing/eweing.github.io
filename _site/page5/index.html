<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      CodingDragon &middot; Meaning of Life
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/styles.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="CodingDragon" href="/atom.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="/" title="Home">CodingDragon</a>
          <small>Meaning of Life</small>
        </h3>
      </header>

      <main>
        <div class="posts">
  
  <article class="post">
    <h1 class="post-title">
      <a href="/study/2015/10/25/03-LVS-and-L4Switch/">
        LVS vs L4 Switch
      </a>
    </h1>

    <time datetime="2015-10-25T00:00:00+09:00" class="post-date">25 Oct 2015</time>

    <h2 id="load-balancing">로드밸런싱 (Load Balancing)</h2>
<p>특정 프로세스에게 과부하가 걸렸을 때 이를 분산해서 처리하는 방식. <br />
웹 서비스의 경우 해당 서비스로 인해 발생하는 트래픽이 많을 경우
여러 대의 서버가 해당 트래픽을 분산 처리 하는 것을 말한다.</p>

<h3 id="section">목적</h3>
<ol>
  <li>처리량 증가</li>
  <li>응답시간 최소화</li>
  <li>리소스 사용 최적화</li>
  <li>특정 서버 자원에게 과부하가 걸리는 것을 피하기 위함</li>
</ol>

<hr />

<h2 id="section-1">서버 로드밸런싱</h2>
<p>한 쪽 서버에만 지나치게 요청이 들어오지 않도록 사용량을 분배하는 것.</p>

<h3 id="section-2">알고리즘</h3>
<ol>
  <li><strong>Hasing</strong> <br />
새로운 연결(TCP/UDP)이 일어날 경우 각 클라이언트에 대한 hasing key를 가지고 경로를 설정한다.
hasing key는 클라이언트의 IP와 port, 혹은 IP 주소 만으로 결정된다.
메모리를 적게 사용하고 요구 절차가 간단하다.</li>
  <li><strong>Round-Robin</strong> <br />
라운드 로빈 방식으로 처리. <br />
각 클라이언트는 동일하게 취급되며, 각 서버나 경로는 같은 처리량을 보유해야 한다.</li>
  <li><strong>Weighted Round-Robin</strong> <br />
서로 다른 처리 능력을 가진 서버가 있을 경우 사용한다. <br />
가중치를 줘서 많이 처리할 수 있는 서버로 많은 트래픽을 할당한다.</li>
  <li><strong>Least Connection</strong> <br />
연결 수가 가장 적은 서버로 네트워크를 연결한다.
동적인 분산 알고리즘으로 각 서버에 대한 현재 연결 수를 동적으로 카운트 할 수 있다.</li>
  <li><strong>Weighted Least Connection</strong> <br />
서버의 처리 능력을 고려하여 가중치를 부여하면서 Least Connection을 적용. <br />
트래픽을 골고루 분산시킨다.</li>
</ol>

<h3 id="section-3">서비스 방식</h3>
<p>네트워크 상단에 L4 스위치 가상 서버가 존재하여
서버로 들어오는 패킷을 리얼 서버로 트래픽을 균일하게 부하 분산 시킨다.
만약 리얼서버 중 정상적으로 작동하지 않는 서버가 있다면,
이를 감지하여 정상적으로 작동하는 서버에게 트래픽을 부하 분산 시킨다.</p>

<h3 id="section-4">장점</h3>
<ol>
  <li>고가의 서버로 확장하지 않고 저렴한 비용으로 다수의 서버를 증설하여 경제적을 비용절감 할 수 있다.</li>
  <li>대량의 트래픽으로 특정 서버에게 부하가 발생할 경우 L4 스위치가 이를 감지하여 합리적으로 부하 분산을 처리한다.</li>
  <li>1대의 서버 장애가 발생해도 서비스 중단 없이 다른 서버에게 트래픽을 분배하여 서비스 운영이 끊기지 않는다.</li>
</ol>

<hr />

<h2 id="l4-switch">L4 Switch</h2>
<p>IP 주소와 포트를 기반으로 로드밸런싱하는 고가의 하드웨어이다. <br />
웬만한 서비스에서는 이것만으로도 부하분산을 처리할 수 있다.
가격이 매우 비싸다는 것이 흠이다.</p>

<hr />

<h2 id="lvs">LVS</h2>
<p><strong>Linux Virtual Server</strong> <br />
리눅스 가상 서버 <br />
고가용성 서버를 구축하기 위해 리눅스 머신을 로드밸런스 하도록 도와주는 운영시스템</p>

<p>한 대의 서버로 증가하는 인터넷 사용자를 처리하기 힘들어지면서 <br />
고가용성 서버<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>를 구축 하기 위한 리눅스 머신 로드밸런싱을 도와주는 운영 시스템이다.</p>

<hr />

<h2 id="lvs--l4">LVS &amp; L4</h2>
<p>두 개 모두 로드밸런싱을 위해 사용된다.</p>

<ul>
  <li>L4는 로드밸런싱 처리를 위한 알고리즘이 탑재 되어 있음. 변경하는 것이 까다로움. <br />
LVS는 사용자가 직접 세팅 가능.</li>
  <li>L4는 장비 가격이 매우 비쌈. <br />
LVS는 오픈 소스가 존재하여 상대적으로 저렴하게 운영 가능.</li>
  <li>L4는 하드웨어, LVS는 소프트웨어</li>
</ul>
<div class="footnotes">
  <ol>
    <li id="fn:1">

      <p><a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

  </article>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page6">Older</a>
  
  
    <a class="pagination-item newer" href="/page4">Newer</a>
  
</div>

      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="2015-11-02T00:45:45+09:00">2015</time>. All rights reserved.
        </small>
      </footer>
    </div>

  </body>
</html>
